<!doctype html>
<html>

	<head>
		<meta charset="utf-8">
		<meta content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0,user-scalable=no" name="viewport" />
		<meta name="format-detection" content="telephone=no" />
		<meta name="apple-mobile-web-app-status-bar-style" />
		<title>添加收货地址</title>
		<link href="css/global.css" type="text/css" rel="stylesheet">
		<link href="css/flex.css" type="text/css" rel="stylesheet">
	</head>

	<body>
		<div class="title_box">
			<div>
				<img class="back_img" src="images/back_img.png" alt="">
			</div>
			添加收货地址
			<a href="javascript:;" class="save_tit_r">保存</a>
		</div>
		<div class="address_list_box">
			<ul class="message_takeDelivery">
				<li class="clearfix">
					<label class="flex_box row_space_between"><span>收</span><span>件</span><span>人:</span></label><input class="message_input" type="text" id="addressee">
				</li>
				<li class="clearfix">
					<label>联系电话:</label><input class="message_input" type="tel" id="phone" maxlength="11">
				</li>
				<li class="clearfix">
					<label>所在地区:</label><input class="message_input" type="text" id="area">
				</li>
				<li class="clearfix">
					<label>详细地址:</label><textarea class="message_input" id="detailarea"></textarea>
				</li>
			</ul>
		</div>

		<script src="js/jquery-1.11.3.min.js"></script>
		<script src="js/global.js"></script>
		<script>
			String.prototype.trim = function() {　　
				return this.replace(/(^\s*)|(\s*$)/g, "");　　
			}
			$(function() {
				//点击保存
				$('.save_tit_r').click(function() {
					var that=$(this);
					var addressee = $("#addressee").val().trim();
					if(!addressee) {
						alert("请输入收件人");
						return false;
					}

					var phone = $("#phone").val().trim();
					if(!phone && ) {
						alert("请输入手机号");
						return false;
					}
					/*
					 
					 *  * 13段：130、131、132、133、134、135、136、137、138、139
					 * 14段：145、147
					 * 15段：150、151、152、153、155、156、157、158、159
					 * 17段：170、176、177、178
					 * 18段：180、181、182、183、184、185、186、187、188、189
		             * 国际码 如：中国(+86)
					 * */
					if(!/^((\+?[0-9]{1,4})|(\(\+86\)))?(13[0-9]|14[57]|15[012356789]|17[0678]|18[0-9])\d{8}$/.test(phone)){
						alert("请输入合法的手机号");
						return false;
					}
					
					var areas=$("#area").val().trim();
					if(!areas){
						alert("请输入所属地区");
						return false;
					}
					
					var detailarea=$("#detailarea").val().trim()
					if(!area){
						alert("请输入所属地区");
						return false;
					}
					
					if(!that.hasClass('not')){
						$.ajax({
							type:'post',
							url:'',
							data:{
								addressee:addressee,
								phone:phone,
								areas:areas,
								detailarea:detailarea
							},
							beforeSend:function(){
								that.addClass('not');
							},
							success:function(data){
								alert('保存成功');
								that.removeClass('not');
							}
						});
					}
					
				});
			});
		</script>
	</body>

</html>