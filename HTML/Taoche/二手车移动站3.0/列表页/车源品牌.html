<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
    <meta content="yes" name="apple-mobile-web-app-capable" />
    <meta content="black" name="apple-mobile-web-app-status-bar-style" />
    <meta content="telephone=no" name="format-detection" />
    <title>车源品牌</title>
    <link rel="stylesheet" type="text/css" href="../css/新头尾.css" />
    <link rel="stylesheet" type="text/css" href="../css/公共控件.css" />
    <link rel="stylesheet" type="text/css" href="../css/列表页-新.css" />
    <link rel="stylesheet" type="text/css" href="../css/列表页筛选.css" />
    <link rel="stylesheet" type="text/css" href="../css/车型大全.css" />
    <link rel="stylesheet" type="text/css" href="../css/车型全部品牌logo_片断.css" />
    <link rel="stylesheet" type="text/css" href="../css/底部控件.css" />
    <link rel="stylesheet" type="text/css" href="../css/选车页面.css" />
    <link rel="stylesheet" type="text/css" href="../css/2015选车工具.css" />
    <link rel="stylesheet" type="text/css" href="../css/搜索.css" />
    <link href="../css/双节样式.css" rel="stylesheet">
</head>
<body>
<!-- 无选项  start -->
<div class="filter-seller boxwrap" id="filterNav">
    <ul>
        <li class="tabsli"><a href="javascript:;"><em>排序</em></a></li>
        <li class="tabsli tabsli-brand"><a href="javascript:;"><em>品牌</em></a></li>
        <li class="tabsli"><a href="javascript:;"><em>价格</em></a></li>
        <li class="tabsli"><a href="javascript:;"><em>筛选</em></a></li>
    </ul>
</div>
<!-- 无选项  end -->
<!-- 有选项  start -->
<!--<div class="filter-seller boxwrap">
    <ul>
        <li class="selected"><a href="#"><em>推荐产品</em></a></li>
        <li class="selected"><a href="#"><em>奥迪A6</em></a></li>
        <li class="selected"><a href="#"><em>20-30万</em></a></li>
        <li class="selected"><a href="#"><em>筛选</em></a></li>
    </ul>
</div>-->
<!-- 有选项  end -->

<div class="mark" style="display:none;"></div>

<!-- 品牌下拉 start -->
<div class="sort-box-wrap swipeTop sortbox-brand">
    <div class="brandfilter">
        <!-- 字母导航 end -->
        <div class="alert" style="display: none;">
            <span>A</span>
        </div>

        <!-- 品牌列表 start -->
        <div class="brand-list bybrand_list">
            <div class="brand-unlimited">
                <a href="#">不限品牌</a>
            </div>
            <div class="tt-small phone-title" data-key="#">
                <span>热门品牌</span>
            </div>
            <!--<div class="tt-small flex-header" style="display:block; visibility:hidden">
                <span>热门品牌</span>
            </div>-->
            <div class="brand-hot">
                <ul>
                    <li>
                        <a href="#" data-action="car" data-id="8">
                            <img src="../images/pic_80x80.jpg" />
                            <p data-key="name">奥迪</p>
                            <input type="hidden" class="brand-logo m_9_b" />
                        </a>
                    </li>
                    <li>
                        <a href="#" data-action="car" data-id="8">
                            <img src="../images/pic_80x80.jpg" />
                            <p data-key="name">大众</p>
                            <input type="hidden" class="brand-logo m_8_b" />
                        </a>
                    </li>
                    <li>
                        <a href="#" data-action="car" data-id="8">
                            <img src="../images/pic_80x80.jpg" />
                            <p data-key="name">福特</p>
                            <input type="hidden" class="brand-logo m_5_b" />
                        </a>
                    </li>
                    <li>
                        <a href="#" data-action="car" data-id="8">
                            <img src="../images/pic_80x80.jpg" />
                            <p data-key="name">起亚</p>
                            <input type="hidden" class="brand-logo m_6_b" />
                        </a>
                    </li>
                    <li>
                        <a href="#" data-action="car" data-id="7">
                            <img src="../images/pic_80x80.jpg" />
                            <p data-key="name">现代</p>
                            <input type="hidden" class="brand-logo m_7_b" />
                        </a>
                    </li>
                </ul>
            </div>
            <div class="content" data-key="brand" >
                <div class="cont-loading">
                    <div class="loading">
                        <img src="http://image.bitautoimg.com/uimg/mbt2015/images/loading.gif" />
                        <p>正在加载...</p>
                    </div>
                </div>
            </div>
        </div>
        <!-- 品牌列表 end -->
        <div class="fixed-nav">
        </div>
    </div>



    <!-- 底部关闭按钮 start -->
    <div class="bot-btn-close btn-close-fixed btn-close-js">
        <a href="javascript:;">关闭</a>
    </div>
    <!-- 底部关闭按钮 end -->


    <!--车型层 start-->
    <div class="leftmask mark leftmask3" style="display: none;"></div>
    <div class="leftPopup car-model car" data-back="leftmask3" style="display: none;" data-key="car">
        <div class="swipeLeft swipeLeft-sub">
            <div class="loading">
                <img src="http://image.bitautoimg.com/uimg/mbt2015/images/loading.gif" />
                <p>正在加载...</p>
            </div>
        </div>
    </div>
    <!--车型层 end-->


    <!--loading模板 start -->
    <div class="template-loading" style="display: none;">
        <div class="loading">
            <img src="http://image.bitautoimg.com/uimg/mbt2015/images/loading.gif" />
            <p>正在加载...</p>
        </div>
    </div>
    <!--loading模板 end -->

    <!--车型模板 start-->
    <script type="text/template" id="carTemplate">
        <div class="choose-car-unlimit">
            <a href="#">不限车型</a>
        </div>
        <div class="clear"></div>
        { for(var i = 0 ; i < list.length ; i++){ }
        <!-- 车款列表 start -->
        {if(list[i].Child.length > 0){ }
        <div class="tt-small">
            <span>{= list[i].BrandName }</span>
        </div>
        {}}
        <!-- 图文混排横向 start -->
        <div class="pic-txt-h pic-txt-9060">
            <ul>
                { for(var j = 0 ; j < list[i].Child.length ; j++){ }
                <li {= list[i].Child[j].SerialId.toString() == (api.car.currentid.toString()) ? 'class="current"':''}>
                <a class="imgbox-2" data-action="models" data-id="{= list[i].Child[j].SerialId}" href="#">
                    <div class="c-box">
                        <h4>{= list[i].Child[j].SerialName }</h4>
                    </div>
                </a>
                </li>
                {}}
            </ul>
        </div>
        <!-- 图文混排横向 end -->
        {}}
    </script>
    <!--车型模板 end-->

    <!-- 品牌列表模板 start -->
    <script type="text/template" id="brandTemplate">
        { for(var n in MsterList){ }
        <div class="tt-small phone-title" data-key="{=n}">
            <span>{=n}</span>
        </div>
        <div class="box">
            <ul>
                {for(var i=0;i< MsterList[n].length;i++){}
                <li {=MsterList[n][i].MasterId.toString() == api.brand.currentid.toString() ? "class='current'":""}>
                <a href="#" data-action="car" data-id="{=MsterList[n][i].MasterId}">
                    <span class="brand-ad" data-materid="{=MsterList[n][i].MasterId}"></span> <!--广告系统占位-->
                    <span class="brand-logo m_{=MsterList[n][i].MasterId}_b"></span>
                    <span class="brand-name">{=MsterList[n][i].MasterName}</span>
                </a>
                </li>
                {}}
            </ul>
        </div>
        {}}
    </script>
    <!-- 品牌列表模板 end -->

    <!-- 字母列表模板 start -->
    <script type="text/template" id="navTemplate">
        <ul class="rows-box">
            <li><a href="#">#</a></li>
            { for(var n in CharList){ }
            { if(CharList[n] != 0){ }
            <li><a href="#">{=n}</a></li>
            {}}
            {}}
        </ul>
    </script>
    <!-- 字母列表模板 end -->
</div>
<!-- 品牌下拉 end -->


<script src="../js/jquery-1.8.0.min.js"></script>
<script type="text/javascript" src="../js/iscroll.js"></script>
<script type="text/javascript" src="../js/underscore.js"></script>
<script type="text/javascript" src="../js/model.js"></script>
<script type="text/javascript" src="../js/note.js"></script>
<script type="text/javascript" src="../js/rightswipe3.js"></script>
<script type="text/javascript" src="../js/brand.js"></script>
<script>
    /*点击筛选项效果*/
    //获取筛选条距离顶部的高度
    var filterBoxT = parseInt($(".filter-seller").offset().top);
    function tabs(tabtit, tabcnt) {
        tabtit.each(function(index) {
            $(this).on('click', function() {
                $(window).scrollTop(filterBoxT);
                var tindex = index,
                        that = $(this);
                //定义下拉菜单显示方法swiperShow();
                function swiperShow(){
                    that.addClass('cur').siblings().removeClass('cur');
                    tabcnt.eq(tindex).addClass("swipeTop-block").siblings().removeClass("swipeTop-block");
                    $(".mark").show();
                    $(".new-header").css({"z-index":0});
                    that.parents(".filter-seller").addClass("filter-fixed");
                    $(".leftmask3").hide();
                }
                //定义下拉菜单隐藏方法swiperHide();
                function swiperHide(){
                    tabcnt.eq(tindex).removeClass('swipeTop-block');
                    that.removeClass('cur');
                    $(".mark").hide();
                    $(".new-header").css({"z-index":10001});
                    that.parents(".filter-seller").removeClass("filter-fixed");
                }
                if (that.hasClass('cur')) {
                    swiperHide();
                } else if(that.hasClass('tabsli-brand')) {
                    swiperShow();
                    brandShow();
                }else{
                    swiperShow();
                }

            })


        });
    }
    tabs($(".tabsli"),$(".sort-box-wrap"));


    //点击关闭按钮
    $(".btn-close-js,.mark").click(function(){
        $(window).scrollTop(filterBoxT);
        $(".sort-box-wrap").removeClass("swipeTop-block");
        $(".mark").hide();
        $("#filterNav ul li").removeClass("cur");
        $(".new-header").css({"z-index":10001});
        $(".filter-seller").removeClass("filter-fixed");
    });

    //搜索弹层显示高度设置2016.11.1
    function searPop(){
        //获取body的高度
        var bdHeight = $("body").height();
        //获取可视屏幕的高度
        var windowH = $(window).height();
        //获取搜索外层div
        var searWrap = $(".search-wrap");
        //获取搜索历史列表
        var searHistory = $(".sear-history");
        //定义外层div=searWrap的高度为body高度
        searWrap.height(bdHeight)
        //定义搜索历史列表的最小高度为屏幕高度
        searHistory.css({"min-height":windowH});
    }

    //条件筛选展开收起
    $(function(){
        //展开收起效果
        $(".term-hidecont").find(".tt-small,.tc-item").hide();
        $(".stle-close").click(function(){
            $(this).hide();
            $(this).parent().find(".tt-small").show();
            $(this).parent().find(".tc-item").slideDown();
        });
        $(".tt-open").click(function(){
            $(this).parent().hide();
            $(this).parents(".term-box").find(".stle-close").show();
            $(this).parents(".term-box").find(".tc-item").slideUp();
        });
        //搜索弹层新增js2016.11.1
        searPop();
        $(".seach input").click(function(){
            $(".search-wrap").show();
        });
        //点击返回按钮关闭搜索弹层
        $(".search-back").click(function(){
            $(".search-wrap").hide();
        });
    });

    //品牌筛选
    function brandShow() {
        var $body = $('body');
        //初始化品牌
        $body.trigger('brandinit', {
            selected: false,
            notetop: -42,
            noteTouchStart: function () {
                //console.log('按下')
            }, noteTouchEnd: function () {
                //console.log('抬起')
            },
            fnEnd1: function () {
                var $swipeLeft = this; //第一层对象
                console.log($swipeLeft)
                console.log('第一层已经打开')
            },
            fnEnd2: function () {
                var $swipeLeft = this; //第二层对象
                console.log($swipeLeft)
                console.log('第二层已经打开')
            }
        });
        api.brand.currentid = '9'; //默认选中品牌ID
        api.car.currentid = '2593'; //默认选中车型ID
        api.model.currentid = '116517'; //默认选中车款ID
        //车款点击回调事件
        api.model.clickEnd = function (paras) {
            console.log(paras)
            //paras.masterobj 品牌对象,paras.carobj 车型对象 ,paras.$current 车款对象
            //品牌ID
            console.log('品牌ID：' + paras.masterid) //已选品牌ID
            //车型ID
            console.log('车型ID ' + paras.carid)  //已选车型ID
            //车款ID
            console.log('车款ID：' + paras.modelid) //已选车款ID
            api.brand.currentid = paras.masterid;
            api.car.currentid = paras.carid;
            api.model.currentid = paras.modelid;
            var $back = $('.' + $leftPopupModels.attr('data-back'));
            //关闭浮层
            $back.trigger('close');
        }
    }


</script>
</body>
</body>
</html>